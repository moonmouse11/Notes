# Request Lifecycle
***
## Basic
Точкой входа для всех запросов к приложению Laravel является файл `public/index.php`. Все запросы направляются в этот файл конфигурацией вашего веб-сервера (`Apache` / `Nginx`).
Файл `index.php` загружает автозагрузчик, созданный менеджером пакетов Composer, а затем извлекает экземпляр приложения Laravel из `bootstrap/app.php`. Первым действием, предпринимаемым самим Laravel, является создание экземпляра приложения / контейнера служб.
***
## HTTP / Console Kernels
Входящий запрос отправляется либо HTTP-ядру, либо ядру консоли с использованием методов `handleRequest` или `handleCommand` экземпляра приложения, в зависимости от типа запроса, поступающего в приложение. Эти два ядра служат центральным местом, через которое проходят все запросы.
Сосредоточимся на ядре HTTP, которое является экземпляром `Illuminate\Foundation\Http\Kernel`.
HTTP-ядро определяет массив загрузчиков (`bootstrappers`), запускающихся до выполнения запроса. Эти загрузчики настраивают обработку ошибок, логирование, определяют среду приложения и выполняют другие задачи, которые необходимо выполнить до фактической обработки запроса.
Ядро HTTP также отвечает за передачу запроса через стек посредников. Эти посредники обрабатывают чтение и запись сеанса `HTTP`, определяет, находится ли приложение в режиме обслуживания, проверяет токен `CSRF` и многое другое.
Сигнатура метода `handle` HTTP-ядра довольно проста: он получает запрос (`Request`) и возвращает ответ (`Response`).
***
## Service Providers
Одно из самых важных действий инициализации ядра – это загрузка **сервис-провайдеров**.
**Сервис-провайдеры** отвечают за начальную настройку различных компонентов фреймворка, таких как база данных, очереди, валидация и маршрутизация.
Laravel пройдет по этому списку **сервис-провайдеров** и создаст экземпляры каждого из них. После создания экземпляров провайдеров, для каждого будет вызван метод `register`. Затем, как только все провайдеры будут зарегистрированы, будет вызван метод `boot` каждого из них. Таким образом сервис-провайдеры могут расчитывать на то, что все связывания в контейнере служб будут зарегистрированы и доступны к моменту запуска метода `boot`.
Практически каждая основная функция, предлагаемая Laravel, инициализируется и настраивается с помощью сервис-провайдеров. Поскольку они инициализируют и настраивают множество функций, предоставляемых фреймворком, сервис-провайдеры являются самой важной частью всего процесса загрузки Laravel.
- `bootstrap/providers.php` - файл для регистрации **сервис-провайдеров** приложения.
***
## Routing
После того как приложение было загружено и все поставщики служб зарегистрированы, `Request` будет передан **маршрутизатору** (`router`) для исполнения. **Маршрутизатор**  отправит запрос на маршрут или контроллер, а также запустит **посредник** (`middleware`) для конкретного маршрута.
**Посредники** обеспечивают удобный механизм фильтрации или исследования HTTP-запросов.
Если запрос успешно проходит через всех **посредников**, назначенных определенному **маршруту**, то метод **маршрута** или **контроллера** будет выполнен, а ответ, возвращенный методом **маршрута** или **контроллера**, будет отправлен обратно через цепочку посредников **маршрута**.
***
## Finishing Up
Когда метод **маршрута** или **контроллера** вернет ответ, тогда ответ отправится обратно через **посредников** маршрута, обеспечивая приложению возможность изменения или проверки исходящего ответа.
Наконец, как только ответ проходит через **посредников**, метод handle ядра HTTP возвращает объект ответа в `handleRequest` экземпляра приложения, и этот метод вызывает метод `send` для возвращенного ответа. Метод `send` отправляет содержимое ответа в веб-браузер пользователя.
***
## Focus on Service Providers
**Сервис-провайдеры** действительно являются ключом к начальной загрузке приложения Laravel. Экземпляр приложения создается, сервис-провайдеры регистрируются, и запрос передается загруженному приложению. 
Пользовательские сервис-провайдеры для вашего приложения хранятся в каталоге `app/Providers`.
По умолчанию провайдер `AppServiceProvider` пуст. Этот провайдер - место для добавления собственной инициализации и связываний контейнера служб приложения. Для больших приложений можно создать несколько поставщиков, каждый из которых детализирует начальную загрузку для конкретных сервисов, используемых  приложением.
***
